import{q as J,t as K,e as C,j as s,B as f,u as X,r as p,P as M,h as Y,N as os,d as L,c as ns,i as ls,z as cs,k as is,l as ds,o as Z,R as $,L as E,T as m,G as S,O as I,A as B,Q as us,H as ms,F as k,a as D,f as ss,V as F,b as ps}from"./index-gyOQFbWm.js";import{G}from"./Grid-DGwavoS0.js";import{u as xs}from"./use-resolved-styles-api-DnEmOX7E.js";import{g as hs}from"./get-auto-contrast-value-Da6zqqWm.js";import{f as gs}from"./formatTime-Dbt9Fc1W.js";import{S as fs,N as js}from"./Select-ZJJzBZoW.js";import"./InputBase-Ju6Otq6v.js";import"./Input-CUaF4mI9.js";import"./use-uncontrolled-YvCjPSRu.js";import"./CheckIcon-DCh9biyr.js";const[ys,bs]=J("Card component was not found in tree");var q={root:"m_e615b15f",section:"m_599a2148"};const vs={},R=K((a,r)=>{const e=C("CardSection",vs,a),{classNames:l,className:c,style:o,styles:d,vars:t,withBorder:i,inheritPadding:n,mod:u,...x}=e,h=bs();return s.jsx(f,{ref:r,mod:[{"with-border":i,"inherit-padding":n},u],...h.getStyles("section",{className:c,style:o,styles:d,classNames:l}),...x})});R.classes=q;R.displayName="@mantine/core/CardSection";const ws={},_s=Y((a,{padding:r})=>({root:{"--card-padding":os(r)}})),z=K((a,r)=>{const e=C("Card",ws,a),{classNames:l,className:c,style:o,styles:d,unstyled:t,vars:i,children:n,padding:u,...x}=e,h=X({name:"Card",props:e,classes:q,className:c,style:o,classNames:l,styles:d,unstyled:t,vars:i,varsResolver:_s}),j=p.Children.toArray(n),b=j.map((g,v)=>typeof g=="object"&&g&&"type"in g&&g.type===R?p.cloneElement(g,{"data-first-section":v===0||void 0,"data-last-section":v===j.length-1||void 0}):g);return s.jsx(ys,{value:{getStyles:h},children:s.jsx(M,{ref:r,unstyled:t,...h("root"),...x,children:b})})});z.classes=q;z.displayName="@mantine/core/Card";z.Section=R;const[Ss,es]=J("Progress.Root component was not found in tree");var P={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const Cs={},U=L((a,r)=>{const{classNames:e,className:l,style:c,styles:o,vars:d,...t}=C("ProgressLabel",Cs,a),i=es();return s.jsx(f,{ref:r,...i.getStyles("label",{className:l,style:c,classNames:e,styles:o}),...t})});U.classes=P;U.displayName="@mantine/core/ProgressLabel";const Ns={},ks=Y((a,{size:r,radius:e,transitionDuration:l})=>({root:{"--progress-size":ns(r,"progress-size"),"--progress-radius":e===void 0?void 0:ls(e),"--progress-transition-duration":typeof l=="number"?`${l}ms`:void 0}})),T=L((a,r)=>{const e=C("ProgressRoot",Ns,a),{classNames:l,className:c,style:o,styles:d,unstyled:t,vars:i,autoContrast:n,transitionDuration:u,...x}=e,h=X({name:"Progress",classes:P,props:e,className:c,style:o,classNames:l,styles:d,unstyled:t,vars:i,varsResolver:ks});return s.jsx(Ss,{value:{getStyles:h,autoContrast:n},children:s.jsx(f,{ref:r,...h("root"),...x})})});T.classes=P;T.displayName="@mantine/core/ProgressRoot";const zs={withAria:!0},A=L((a,r)=>{const{classNames:e,className:l,style:c,styles:o,vars:d,value:t,withAria:i,color:n,striped:u,animated:x,mod:h,...j}=C("ProgressSection",zs,a),b=es(),g=cs(),v=i?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":t,"aria-valuetext":`${t}%`}:{};return s.jsx(f,{ref:r,...b.getStyles("section",{className:l,classNames:e,styles:o,style:c}),...j,...v,mod:[{striped:u||x,animated:x},h],__vars:{"--progress-section-width":`${t}%`,"--progress-section-color":is(n,g),"--progress-label-color":hs(b.autoContrast,g)?ds({color:n,theme:g,autoContrast:b.autoContrast}):void 0}})});A.classes=P;A.displayName="@mantine/core/ProgressSection";const Ps={},N=L((a,r)=>{const e=C("Progress",Ps,a),{value:l,classNames:c,styles:o,vars:d,color:t,striped:i,animated:n,"aria-label":u,...x}=e,{resolvedClassNames:h,resolvedStyles:j}=xs({classNames:c,styles:o,props:e});return s.jsx(T,{ref:r,classNames:h,styles:j,vars:d,...x,children:s.jsx(A,{value:l,color:t,striped:i,animated:n,"aria-label":u})})});N.classes=P;N.displayName="@mantine/core/Progress";N.Section=A;N.Root=T;N.Label=U;/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $s=Z("outline","transfer-in","IconTransferIn",[["path",{d:"M4 18v3h16v-14l-8 -4l-8 4v3",key:"svg-0"}],["path",{d:"M4 14h9",key:"svg-1"}],["path",{d:"M10 11l3 3l-3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ls=Z("outline","transfer-out","IconTransferOut",[["path",{d:"M4 19v2h16v-14l-8 -4l-8 4v2",key:"svg-0"}],["path",{d:"M13 14h-9",key:"svg-1"}],["path",{d:"M7 11l-3 3l3 3",key:"svg-2"}]]);const Rs="_icon_nlesr_1",Ts="_title_nlesr_9",As="_card_nlesr_19",Is="_stats_nlesr_41",Bs="_progressSection_nlesr_49",Fs="_progressTrack_nlesr_57",y={icon:Rs,title:Ts,card:As,"card-title":"_card-title_nlesr_31",stats:Is,progressSection:Bs,progressTrack:Fs},Gs=({title:a,text:r,value:e,event:l,show:c,funds:o,generated:d,goal:t})=>{const i=$(E),{bank:n}=i,u=x=>{switch(x){case"add":a(n.add_button),r(n.add_text),e(0),l("deposit"),c(!0);break;case"withdraw":a(n.remove_button),r(`${n.remove_text} (Max: $${o.toLocaleString("en-US")})`),e(0),l("withdraw"),c(!0);break;case"goal":a(n.monthlyGoal),r(n.goal_text),e(t),l("goal"),c(!0);break}};return s.jsx(f,{children:s.jsxs(G,{w:"100%",justify:"start",children:[s.jsx(G.Col,{span:3,children:s.jsxs(z,{withBorder:!0,radius:"md",p:"sm",className:y.card,h:85,children:[s.jsx(m,{fz:"xs",tt:"uppercase",fw:500,className:y.title,children:n.availableFunds}),s.jsxs(S,{mt:"sm",justify:"space-between",children:[s.jsx(m,{fz:"sm",fw:500,className:y.stats,children:`$${o.toLocaleString("en-US")}`}),s.jsxs(S,{gap:"xs",children:[s.jsx(I,{label:n.add_button,color:"dark.4",fz:"xs",children:s.jsx(B,{size:"xs",variant:"subtle",color:"teal",onClick:()=>{u("add")},children:s.jsx($s,{style:{height:"80%",width:"80%"}})})}),s.jsx(I,{label:n.remove_button,color:"dark.4",fz:"xs",children:s.jsx(B,{size:"xs",variant:"subtle",color:"red",onClick:()=>{u("withdraw")},children:s.jsx(Ls,{style:{height:"80%",width:"80%"}})})})]})]})]})}),s.jsx(G.Col,{span:4,w:"100%",children:s.jsxs(z,{withBorder:!0,radius:"md",p:"sm",className:y.card,h:85,children:[s.jsx(m,{fz:"xs",tt:"uppercase",fw:500,className:y.title,children:n.monthlyGoal}),s.jsxs(S,{justify:"space-between",children:[s.jsx(m,{fz:"sm",fw:500,className:y.stats,children:` $${d.toLocaleString("en-US")} / $${t.toLocaleString("en-US")}`}),s.jsx(I,{label:n.edit_goal,color:"dark.4",fz:"xs",children:s.jsx(B,{size:"xs",variant:"subtle",color:"cyan",onClick:()=>{u("goal")},children:s.jsx(us,{style:{height:"80%",width:"80%"}})})})]}),s.jsx(N,{value:d/t*100,mt:"xs",size:"xs",radius:"xl",classNames:{root:y.progressTrack,section:y.progressSection}})]})})]})})},Ms="_logContainer_1q2uv_3",Es="_option_1q2uv_33",O={logContainer:Ms,option:Es},H=a=>a.sort((r,e)=>e.date-r.date),qs=({myLogs:a})=>{const[r,e]=p.useState(a),l=$(ms),c=$(E),{bank:o}=c,d=t=>{if(!t){const u=H(a);e(u);return}const i=a.filter(u=>u.type===t),n=H(i);e(n)};return p.useEffect(()=>{e(a)},[a]),s.jsxs(f,{h:l>900?"calc(100%)":"calc(85%)",children:[s.jsxs(S,{justify:"space-between",mt:"xs",align:"center",display:"flex",p:"xs",children:[s.jsx(m,{fz:"sm",fw:500,children:o.latest}),s.jsx(fs,{placeholder:c.filter,data:[{value:"deposit",label:o.deposit},{value:"withdraw",label:o.withdraw}],classNames:{option:O.option},styles:{input:{backgroundColor:"rgba(39, 43, 54, 0.15)"},dropdown:{backgroundColor:"rgba(39, 43, 54, 0.9)"}},onChange:t=>{d(t)}})]}),r&&r[0]?s.jsx(f,{className:O.logContainer,mt:5,h:l>900?"calc(80%)":"calc(65%)",children:r.slice(0,30).map(t=>s.jsx(M,{p:"sm",bg:"rgba(39, 43, 54, 0.3)",style:{border:"solid 1px rgba(200,200,200,0.15)",borderRadius:"6px",overflow:"hidden"},mb:"sm",children:s.jsxs(S,{justify:"space-between",w:"100%",grow:!0,children:[s.jsxs(k,{justify:"flex-start",align:"flex-start",direction:"column",mah:100,children:[s.jsx(m,{fz:"xs",c:"dimmed",children:o.description}),s.jsx(m,{fz:"xs",style:{overflow:"auto",wordWrap:"break-word",overflowWrap:"break-word"},maw:"100%",children:t.description})]}),s.jsxs(k,{justify:"flex-start",align:"flex-start",direction:"column",wrap:"wrap",children:[s.jsx(m,{fz:"xs",c:"dimmed",children:o.employee}),s.jsx(m,{fz:"xs",children:t.employee})]}),s.jsxs(k,{justify:"flex-start",align:"flex-start",direction:"column",wrap:"wrap",children:[s.jsx(m,{fz:"xs",c:"dimmed",children:o.date}),s.jsx(m,{fz:"xs",children:gs(t.date)})]}),s.jsxs(k,{justify:"flex-start",align:"flex-start",direction:"column",wrap:"wrap",children:[s.jsx(m,{fz:"xs",c:"dimmed",children:c.amount}),s.jsx(m,{fz:"xs",children:`$${t.amount.toLocaleString("en-US")}`})]}),s.jsxs(k,{justify:"flex-start",align:"flex-start",direction:"column",wrap:"wrap",children:[s.jsx(m,{fz:"xs",c:"dimmed",children:c.type}),s.jsx(m,{fz:"xs",c:t.type=="deposit"?"teal":"red",children:t.type=="deposit"?o.deposit:o.withdraw})]})]})},t.date))}):s.jsx(M,{p:"sm",bg:"rgba(39, 43, 54, 0.3)",style:{border:"solid 1px rgba(200,200,200,0.15)",borderRadius:"6px"},children:s.jsx(m,{fz:"sm",children:o.empty})})]})},Us="_container_1q1p9_1",Vs="_box_1q1p9_25",W={container:Us,box:Vs},Ds=({title:a,text:r,value:e,event:l,show:c})=>{const o=$(E),[d,t]=p.useState(0),i=()=>{c(!1),ss("av_business",l,d)};return s.jsx(f,{className:W.container,children:s.jsxs(f,{className:W.box,children:[s.jsx(m,{fw:500,fz:"md",ta:"center",children:a}),s.jsx(js,{label:r,defaultValue:e||0,onChange:t,w:"80%",mr:"auto",ml:"auto",size:"xs",mt:"xs",styles:{input:{backgroundColor:"transparent"}}}),s.jsxs(S,{grow:!0,mt:"md",w:"80%",ml:"auto",mr:"auto",mb:"xs",children:[s.jsx(D,{size:"xs",variant:"light",color:"teal",onClick:()=>{i()},children:o.confirm}),s.jsx(D,{size:"xs",variant:"light",color:"red",onClick:()=>{c(!1)},children:o.cancel})]})]})})},Q=a=>a.sort((r,e)=>e.date-r.date),ee=()=>{const[a,r]=p.useState(!1),[e,l]=p.useState(""),[c,o]=p.useState(""),[d,t]=p.useState(0),[i,n]=p.useState(""),[u,x]=p.useState([]),[h,j]=p.useState(0),[b,g]=p.useState(0),[v,V]=p.useState(0),[ts,rs]=p.useState(!1);return F("setGoal",w=>{V(w)}),F("setFunds",w=>{j(w)}),F("setLogs",w=>{const _=Q(w);x(_)}),p.useEffect(()=>{(async()=>{const _=await ss("av_business","bank"),as=Q(_.logs);x(as),j(_.funds),g(_.generated),V(_.goal),setTimeout(()=>{rs(!0)},100)})()},[]),s.jsx(s.Fragment,{children:ts?s.jsxs(s.Fragment,{children:[a&&s.jsx(Ds,{title:e,text:c,value:d,event:i,show:r}),s.jsx(Gs,{title:l,text:o,value:t,event:n,show:r,funds:h,generated:b,goal:v}),s.jsx(qs,{myLogs:u})]}):s.jsx(s.Fragment,{children:s.jsx(f,{style:{display:"flex",alignContent:"center",alignItems:"center",height:"100%"},children:s.jsx(ps,{visible:!0,zIndex:1e3,loaderProps:{color:"teal",type:"dots"},overlayProps:{radius:"sm",blur:2,opacity:0}})})})})};export{ee as default};
