import{t as Te,e as A,u as ee,j as e,B as b,q as _e,d as te,W as ke,h as me,s as N,N as ce,k as Q,o as I,R as V,L as se,r as y,w as we,P as Ne,G as B,a as C,f as w,T as $,A as X,Q as Be,X as ze,V as Ee,b as Ie,U as Re}from"./index-gyOQFbWm.js";import{A as ue}from"./Avatar-hRTT-35y.js";import{T as E}from"./TextInput-D7ENN_nh.js";import{M as De}from"./MultiSelect-DuHHne1k.js";import{N as Me,S as Pe}from"./Select-ZJJzBZoW.js";import"./InputBase-Ju6Otq6v.js";import"./Input-CUaF4mI9.js";import"./use-resolved-styles-api-DnEmOX7E.js";import"./use-uncontrolled-YvCjPSRu.js";import"./CheckIcon-DCh9biyr.js";var pe={root:"m_4451eb3a"};const $e={},ne=Te((t,n)=>{const s=A("Center",$e,t),{classNames:r,className:a,style:m,styles:c,unstyled:d,vars:u,inline:p,mod:g,...l}=s,x=ee({name:"Center",props:s,classes:pe,className:a,style:m,classNames:r,styles:c,unstyled:d,vars:u});return e.jsx(b,{ref:n,mod:[{inline:p},g],...x("root"),...l})});ne.classes=pe;ne.displayName="@mantine/core/Center";const[Le,Oe]=_e("Table component was not found in the tree");var R={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function Ve(t,n){if(!n)return;const s={};return n.columnBorder&&t.withColumnBorders&&(s["data-with-column-border"]=!0),n.rowBorder&&t.withRowBorders&&(s["data-with-row-border"]=!0),n.striped&&t.striped&&(s["data-striped"]=t.striped),n.highlightOnHover&&t.highlightOnHover&&(s["data-hover"]=!0),n.captionSide&&t.captionSide&&(s["data-side"]=t.captionSide),n.stickyHeader&&t.stickyHeader&&(s["data-sticky"]=!0),s}function T(t,n){const s=`Table${t.charAt(0).toUpperCase()}${t.slice(1)}`,r=te((a,m)=>{const c=A(s,{},a),{classNames:d,className:u,style:p,styles:g,...l}=c,x=Oe();return e.jsx(b,{component:t,ref:m,...Ve(x,n),...x.getStyles(t,{className:u,classNames:d,style:p,styles:g,props:c}),...l})});return r.displayName=`@mantine/core/${s}`,r.classes=R,r}const Z=T("th",{columnBorder:!0}),ge=T("td",{columnBorder:!0}),L=T("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),ye=T("thead",{stickyHeader:!0}),xe=T("tbody"),fe=T("tfoot"),ve=T("caption",{captionSide:!0});function oe({data:t}){return e.jsxs(e.Fragment,{children:[t.caption&&e.jsx(ve,{children:t.caption}),t.head&&e.jsx(ye,{children:e.jsx(L,{children:t.head.map((n,s)=>e.jsx(Z,{children:n},s))})}),t.body&&e.jsx(xe,{children:t.body.map((n,s)=>e.jsx(L,{children:n.map((r,a)=>e.jsx(ge,{children:r},a))},s))}),t.foot&&e.jsx(fe,{children:e.jsx(L,{children:t.foot.map((n,s)=>e.jsx(Z,{children:n},s))})})]})}oe.displayName="@mantine/core/TableDataRenderer";const Ae={type:"scrollarea"},He=me((t,{minWidth:n,type:s})=>({scrollContainer:{"--table-min-width":N(n),"--table-overflow":s==="native"?"auto":void 0}})),ae=te((t,n)=>{const s=A("TableScrollContainer",Ae,t),{classNames:r,className:a,style:m,styles:c,unstyled:d,vars:u,children:p,minWidth:g,type:l,...x}=s,f=ee({name:"TableScrollContainer",classes:R,props:s,className:a,style:m,classNames:r,styles:c,unstyled:d,vars:u,varsResolver:He,rootSelector:"scrollContainer"});return e.jsx(b,{component:l==="scrollarea"?ke:"div",...l==="scrollarea"?{offsetScrollbars:"x"}:{},ref:n,...f("scrollContainer"),...x,children:e.jsx("div",{...f("scrollContainerInner"),children:p})})});ae.classes=R;ae.displayName="@mantine/core/TableScrollContainer";const qe={withRowBorders:!0,verticalSpacing:7},Ge=me((t,{layout:n,captionSide:s,horizontalSpacing:r,verticalSpacing:a,borderColor:m,stripedColor:c,highlightOnHoverColor:d,striped:u,highlightOnHover:p,stickyHeaderOffset:g,stickyHeader:l})=>({table:{"--table-layout":n,"--table-caption-side":s,"--table-horizontal-spacing":ce(r),"--table-vertical-spacing":ce(a),"--table-border-color":m?Q(m,t):void 0,"--table-striped-color":u&&c?Q(c,t):void 0,"--table-highlight-on-hover-color":p&&d?Q(d,t):void 0,"--table-sticky-header-offset":l?N(g):void 0}})),i=te((t,n)=>{const s=A("Table",qe,t),{classNames:r,className:a,style:m,styles:c,unstyled:d,vars:u,horizontalSpacing:p,verticalSpacing:g,captionSide:l,stripedColor:x,highlightOnHoverColor:f,striped:_,highlightOnHover:D,withColumnBorders:H,withRowBorders:z,withTableBorder:j,borderColor:k,layout:re,variant:S,data:M,children:q,stickyHeader:G,stickyHeaderOffset:le,mod:F,...U}=s,P=ee({name:"Table",props:s,className:a,style:m,classes:R,classNames:r,styles:c,unstyled:d,rootSelector:"table",vars:u,varsResolver:Ge});return e.jsx(Le,{value:{getStyles:P,stickyHeader:G,striped:_===!0?"odd":_||void 0,highlightOnHover:D,withColumnBorders:H,withRowBorders:z,captionSide:l||"bottom"},children:e.jsx(b,{component:"table",variant:S,ref:n,mod:[{"data-with-table-border":j},F],...P("table"),...U,children:q||!!M&&e.jsx(oe,{data:M})})})});i.classes=R;i.displayName="@mantine/core/Table";i.Td=ge;i.Th=Z;i.Tr=L;i.Thead=ye;i.Tbody=xe;i.Tfoot=fe;i.Caption=ve;i.ScrollContainer=ae;i.DataRenderer=oe;/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fe=I("outline","building-bank","IconBuildingBank",[["path",{d:"M3 21l18 0",key:"svg-0"}],["path",{d:"M3 10l18 0",key:"svg-1"}],["path",{d:"M5 6l7 -3l7 3",key:"svg-2"}],["path",{d:"M4 10l0 11",key:"svg-3"}],["path",{d:"M20 10l0 11",key:"svg-4"}],["path",{d:"M8 14l0 3",key:"svg-5"}],["path",{d:"M12 14l0 3",key:"svg-6"}],["path",{d:"M16 14l0 3",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ue=I("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var We=I("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Je=I("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qe=I("outline","selector","IconSelector",[["path",{d:"M8 9l4 -4l4 4",key:"svg-0"}],["path",{d:"M16 15l-4 4l-4 -4",key:"svg-1"}]]);const Xe="_editorContainer_1qj4m_1",Ke="_text_1qj4m_25",Ye="_editor_1qj4m_1",Ze="_option_1qj4m_65",et="_input_1qj4m_73",tt="_pill_1qj4m_81",v={editorContainer:Xe,text:Ke,editor:Ye,option:Ze,input:et,pill:tt},st=({data:t,show:n})=>{const s=V(se),{employees:r}=s,[a,m]=y.useState(t),c=V(we),d=c.allPermissions.filter(l=>t.permissions&&t.permissions[l.value]).map(l=>l.value),u=l=>{w("av_business","updateEmployee",l),n(!1)},p=(l,x)=>{m(f=>({...f,[l]:x.target.value}))},g=l=>{const x=l.reduce((f,_)=>(f[_]=!0,f),{});m(f=>({...f,permissions:x}))};return e.jsx(b,{className:v.editorContainer,children:e.jsxs(Ne,{className:v.editor,p:"md",children:[e.jsx(ue,{src:a.image,w:75,h:75,style:{justifyContent:"center",textAlign:"center",marginLeft:"auto",marginRight:"auto",border:"solid 2px rgba(255,255,255,0.25)"}}),e.jsx(E,{label:r.name,value:a.name?a.name:"",size:"xs",classNames:{input:v.input}}),e.jsx(E,{label:r.phone,defaultValue:a.phone?a.phone:"",size:"xs",classNames:{input:v.input},mt:"xs",onChange:l=>{p("phone",l)}}),e.jsx(E,{label:r.email,defaultValue:a.email?a.email:"",size:"xs",classNames:{input:v.input},mt:"xs",onChange:l=>{p("email",l)}}),e.jsx(E,{label:r.photo,defaultValue:a.image?a.image:"",size:"xs",classNames:{input:v.input},mt:"xs",onChange:l=>{p("image",l)}}),e.jsx(De,{label:r.permissions,size:"xs",classNames:{input:v.input,pill:v.pill,options:v.options,option:v.option},mt:"xs",defaultValue:d,data:c.allPermissions,styles:{dropdown:{backgroundColor:"rgba(39, 43, 54, 0.9)"}},onChange:l=>{g(l)}}),e.jsxs(B,{mt:"sm",grow:!0,children:[e.jsx(C,{size:"xs",variant:"light",color:"cyan",onClick:()=>{u(a)},children:s.save}),e.jsx(C,{size:"xs",variant:"light",color:"red",onClick:()=>{n(!1)},children:s.close})]})]})})},nt="_th_5gh1y_1",ot="_control_5gh1y_9",at="_icon_5gh1y_19",rt="_option_5gh1y_31",O={th:nt,control:ot,icon:at,option:rt},lt="_container_iw481_1",it="_moneyBox_iw481_25",K={container:lt,moneyBox:it},ct=({identifier:t,type:n,show:s,handleFire:r})=>{const a=V(se),{employees:m}=a,[c,d]=y.useState(0),u=()=>{w("av_business","sendBonus",{identifier:t,amount:c}),s(!1)},p=async()=>{s(!1),await w("av_business","fireEmployee",t)&&r(t)};return e.jsx(b,{className:K.container,children:n=="money"?e.jsxs(b,{className:K.moneyBox,children:[e.jsx($,{fw:500,fz:"md",ta:"center",children:m.bonus}),e.jsx(Me,{label:a.amount,w:"80%",mr:"auto",ml:"auto",size:"xs",mt:"xs",styles:{input:{backgroundColor:"transparent"}},onChange:g=>{d(Number(g))}}),e.jsxs(B,{grow:!0,mt:"md",w:"80%",ml:"auto",mr:"auto",mb:"xs",children:[e.jsx(C,{size:"xs",variant:"light",color:"teal",onClick:()=>{u()},children:a.confirm}),e.jsx(C,{size:"xs",variant:"light",color:"red",onClick:()=>{s(!1)},children:a.cancel})]})]}):e.jsxs(b,{className:K.moneyBox,children:[e.jsx($,{fw:500,fz:"md",ta:"center",children:m.fireEmployee}),e.jsx($,{fw:200,fz:"sm",ta:"center",c:"gray.6",children:m.fireText}),e.jsxs(B,{grow:!0,mt:"md",w:"80%",ml:"auto",mr:"auto",mb:"xs",children:[e.jsx(C,{size:"xs",variant:"light",color:"teal",onClick:()=>{p()},children:a.confirm}),e.jsx(C,{size:"xs",variant:"light",color:"red",onClick:()=>{s(!1)},children:a.cancel})]})]})})};function Y({children:t,reversed:n,sorted:s,onSort:r}){const a=s?n?We:Ue:Qe;return e.jsx(i.Th,{className:O.th,children:e.jsx(Re,{onClick:r,className:O.control,children:e.jsxs(B,{justify:"space-between",children:[e.jsx($,{fw:500,fz:"sm",children:t}),e.jsx(ne,{className:O.icon,children:e.jsx(a,{style:{width:N(16),height:N(16)},stroke:1.5})})]})})})}function de(t,n){const s=n.toLowerCase().trim();return t.filter(r=>Object.keys(r).some(a=>r[a].toString().toLowerCase().includes(s)))}function he(t,n){const{sortBy:s,reversed:r}=n;return de(s?[...t].sort((a,m)=>{let c=a[s],d=m[s];return typeof c=="number"&&typeof d=="number"?r?d-c:c-d:r?d.toString().localeCompare(c.toString()):c.toString().localeCompare(d.toString())}):t,n.search)}const bt=()=>{const{employees:t}=V(se),[n,s]=y.useState([]),[r,a]=y.useState([]),[m,c]=y.useState("delete"),[d,u]=y.useState(!1),[p,g]=y.useState(""),[l,x]=y.useState(!1),[f,_]=y.useState([]),[D,H]=y.useState(""),[z,j]=y.useState(n),[k,re]=y.useState(null),[S,M]=y.useState(!1),[q,G]=y.useState(!1);function le(o){const h=r.find(J=>J.value==o.grade.level);return h?h.value:void 0}const F=async()=>{const o=await w("av_business","hire");o&&(s(o),j(o))},U=o=>{_(o),x(!0)},P=o=>{g(o.identifier),c("money"),u(!0)},be=o=>{g(o.identifier),c("delete"),u(!0)},W=o=>{const h=o===k?!S:!1;M(h),re(o),j(he(n,{sortBy:o,reversed:h,search:D}))},je=o=>{const{value:h}=o.currentTarget;H(h),j(he(n,{sortBy:k,reversed:S,search:h}))},Se=(o,h)=>{h&&w("av_business","updateGrade",{identifier:o.identifier,grade:h})},Ce=o=>{const h=n.filter(J=>J.identifier!==o);s(h),j(h)},ie=z==null?void 0:z.map(o=>e.jsxs(i.Tr,{fz:"xs",children:[e.jsx(i.Td,{children:e.jsx(ue,{src:o.image,size:30})}),e.jsx(i.Td,{children:o.name}),e.jsx(i.Td,{children:e.jsx(Pe,{defaultValue:le(o),size:"xs",data:r,classNames:{option:O.option},styles:{input:{backgroundColor:"transparent"},dropdown:{backgroundColor:"rgba(39, 43, 54, 0.95)"}},onChange:h=>{Se(o,h)}})}),e.jsx(i.Td,{children:o!=null&&o.generated?`$${o.generated.toLocaleString("en-US")}`:"$0"}),e.jsx(i.Td,{children:o.lastSeen}),e.jsx(i.Td,{children:e.jsxs(B,{gap:"sm",children:[e.jsx(X,{size:"sm",variant:"subtle",color:"cyan.4",onClick:()=>{U(o)},children:e.jsx(Be,{style:{width:"70%",height:"70%"}})}),e.jsx(X,{size:"sm",variant:"subtle",color:"teal.4",onClick:()=>{P(o)},children:e.jsx(Fe,{style:{width:"70%",height:"70%"}})}),e.jsx(X,{size:"sm",variant:"subtle",color:"red.4",onClick:()=>{be(o)},children:e.jsx(ze,{style:{width:"70%",height:"70%"}})})]})})]},o.name));return Ee("updateEmployees",o=>{s(o),j(o)}),y.useEffect(()=>{(async()=>{const h=await w("av_business","getEmployees");h&&(console.log(JSON.stringify(h.employees)),s(h.employees),j(h.employees),a(h.grades)),setTimeout(()=>{G(!0)},100)})()},[]),e.jsx(e.Fragment,{children:q?e.jsxs(e.Fragment,{children:[l&&e.jsx(st,{data:f,show:x}),d&&e.jsx(ct,{identifier:p,type:m,show:u,handleFire:Ce}),e.jsxs(B,{gap:"sm",mb:"md",preventGrowOverflow:!1,grow:!0,children:[e.jsx(E,{placeholder:t.search,leftSection:e.jsx(Je,{style:{width:N(16),height:N(16)},stroke:1.5}),value:D,onChange:je,styles:{input:{backgroundColor:"rgba(39, 43, 54, 0.25)"}},opacity:l||d?.1:1}),e.jsx(C,{variant:"light",color:"teal",maw:"15%",onClick:()=>{F()},opacity:l||d?.1:1,children:t.hire})]}),e.jsx(b,{h:"90%",style:{overflow:"auto"},children:e.jsxs(i,{horizontalSpacing:"md",verticalSpacing:"xs",layout:"fixed",children:[e.jsx(i.Tbody,{children:e.jsxs(i.Tr,{children:[e.jsx(i.Th,{w:60}),e.jsx(Y,{sorted:k==="name",reversed:S,onSort:()=>W("name"),children:t.name}),e.jsx(i.Th,{children:t.grade}),e.jsx(Y,{sorted:k==="generated",reversed:S,onSort:()=>W("generated"),children:t.generated}),e.jsx(Y,{sorted:k==="lastSeen",reversed:S,onSort:()=>W("lastSeen"),children:t.lastSeen}),e.jsx(i.Th,{children:t.actions})]})}),e.jsx(i.Tbody,{children:ie.length>0?ie:null})]})})]}):e.jsx(b,{style:{display:"flex",alignContent:"center",alignItems:"center",height:"100%"},children:e.jsx(Ie,{visible:!0,zIndex:1e3,loaderProps:{color:"teal",type:"dots"},overlayProps:{radius:"sm",blur:2,opacity:0}})})})};export{bt as default};
