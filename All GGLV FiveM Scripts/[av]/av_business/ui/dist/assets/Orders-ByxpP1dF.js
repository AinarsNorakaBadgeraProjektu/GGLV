import{o as v,R as f,L as b,j as e,B as r,G as z,T as p,F as N,a as _,f as j,r as m,b as q}from"./index-gyOQFbWm.js";import{A as u}from"./Accordion-B1TKSENF.js";import{D as w}from"./Divider-D0-CmhI-.js";import"./use-uncontrolled-YvCjPSRu.js";/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var O=v("outline","clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]);const k="_container_hzq82_1",C="_cashier_hzq82_15",F="_content_hzq82_37",$="_box_hzq82_59",L="_panel_hzq82_71",P="_products_hzq82_89",A="_product_hzq82_89",D="_glow_hzq82_121",I="_empty_hzq82_139",M="_control_hzq82_157",a={container:k,cashier:C,content:F,box:$,panel:L,products:P,product:A,glow:D,empty:I,control:M},R=l=>{const c={};return l.forEach(s=>{const t=`${s.label}|${s.ingredients.sort().join(",")}`;c[t]||(c[t]={count:0,ingredients:s.ingredients,name:s.name}),c[t].count+=1}),Object.keys(c).map(s=>{const[t]=s.split("|"),{count:o,ingredients:n,name:x}=c[s];return{label:`${o} ${t}`,ingredients:n,name:x}})},E=({allOrders:l,deleteOrder:c})=>{const d=f(b),{orders:s}=d,t=n=>{c(n.order),j("av_business","deleteOrder",n.order)},o=n=>{j("av_business","addQueue",n)};return e.jsx(e.Fragment,{children:l.length>0?e.jsx(e.Fragment,{children:e.jsx(r,{className:a.products,children:l.map((n,x)=>e.jsx(u,{radius:"xs",children:e.jsxs(u.Item,{value:String(n.order),mt:"xs",children:[e.jsx(u.Control,{classNames:{control:a.control},children:e.jsxs(z,{gap:"xs",justify:"space-between",children:[e.jsxs(p,{children:["Order #",n.order]}),e.jsx(e.Fragment,{children:n.queue?e.jsx(O,{style:{width:"5%",height:"5%",marginRight:"5%"},color:"cyan"}):e.jsx(e.Fragment,{})})]})}),e.jsxs(u.Panel,{bg:"linear-gradient(0deg, rgba(0,0,0,0.0) 0%, rgba(25,25,25,0.25) 25%, rgba(40,40,40,0.8) 100%)",children:[e.jsx(N,{mih:50,gap:"xs",justify:"flex-start",align:"flex-start",direction:"column",wrap:"wrap",mt:5,children:R(n.cart).map((h,i)=>e.jsxs(p,{size:"xs",children:["- ",e.jsx("strong",{children:h.label})," ",h.ingredients.length>0?`[${h.ingredients.join(", ")}]`:""]},i))}),e.jsxs(r,{mt:"xs",style:{display:"flex",right:"0",textAlign:"right",justifyContent:"end"},children:[e.jsx(_,{size:"xs",variant:"subtle",color:"red",onClick:()=>{t(n)},mr:"xs",children:s.complete}),e.jsx(_,{size:"xs",variant:"light",color:"cyan.3",onClick:()=>{o(n)},children:s.queue})]})]})]},n.order)},x))})}):e.jsx(r,{className:a.empty,children:s.empty})})},T=(l,c)=>{const d=c.reduce((s,t)=>(s[t.value]=t.label,s),{});return l.map(s=>({...s,cart:s.cart.map(t=>({...t,ingredients:t.ingredients.map(o=>d[o]||o)}))}))},H=({serial:l})=>{const c=f(b),{orders:d}=c,[s,t]=m.useState(!1),[o,n]=m.useState([]),x=h=>{const i=o.filter(g=>(g==null?void 0:g.order)!==h);n(i)};return m.useEffect(()=>{(async()=>{const i=await j("av_business","getOrders",l);if(i){const g=i.ingredients,y=T(i.orders,g);n(y),setTimeout(()=>{t(!0)},100)}})(),setTimeout(()=>{t(!0)},100)},[]),e.jsx(e.Fragment,{children:s?e.jsx(r,{className:a.container,children:e.jsx(r,{className:a.cashier,children:e.jsx(r,{className:a.content,children:e.jsxs(r,{className:a.box,children:[e.jsx(p,{fz:"lg",fw:500,className:a.glow,ta:"center",children:`${o.length} ${d.header}`}),e.jsx(w,{}),e.jsx(E,{allOrders:o,deleteOrder:x})]})})})}):e.jsx(r,{className:a.container,children:e.jsx(r,{className:a.cashier,children:e.jsx(r,{className:a.content,children:e.jsx(r,{className:a.box,children:e.jsx(r,{style:{display:"flex",alignContent:"center",alignItems:"center"},children:e.jsx(q,{visible:!0,zIndex:1e3,loaderProps:{color:"teal",type:"dots"},overlayProps:{radius:"sm",blur:2,opacity:0}})})})})})})})};export{H as default};
